{% extends 'base.html.twig' %}

{% block title %}commandes en cours
{% endblock %}

{% block body %}
	<div class="max-w-4xl mx-auto px-4 pb-12 sm:px-6 lg:px-8 mt-6">
		<div class="flex flex-col items-center my-8">
			<h1 class="text-3xl font-bold text-gray-900">Commandes en cours</h1>
			<p class="text-md text-gray-500 mt-2">
				Liste des commandes en cours de traitement par les utilisateurs
			</p>
		</div>
		{% for cart in carts %}
			<div class="bg-white border border-gray-200 hover:shadow-lg rounded-3xl overflow-hidden mb-6 transition-shadow duration-300 ease-in-out">
				<div class="p-6">
					<p class="text-lg font-semibold">{{ cart.user.lastname }}
						{{ cart.user.firstname }}</p>
					<p class="text-gray-500 mb-4">{{ cart.user.email }}</p>
					{% set total = 0 %}
					<div class="flex flex-wrap gap-4">
						{% for cartContent in cart.cartContents %}
							<div class="flex items-center gap-2">
								<div class="border rounded-lg overflow-hidden" style="width: 100px; height: 100px;">
									<img src="/uploads/{{ cartContent.product.image }}" alt="Image de produit" class="object-cover w-full h-full">
								</div>
								<div>
									<p>{{ cartContent.product.name }}</p>
									<p class="text-gray-500">{{ cartContent.quantity }}
										x
										{{ cartContent.product.price }}
										€</p>
								</div>
							</div>
							{% set total = total + (cartContent.quantity * cartContent.product.price) %}
						{% endfor %}
					</div>
					<div class="text-right mt-4">
						<span class="text-lg font-bold">Total:
							{{ total }}
							€</span>
					</div>
				</div>
			</div>
		{% endfor %}
	</div>
{% endblock %}
